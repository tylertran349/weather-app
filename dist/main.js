(()=>{"use strict";var e={d:(t,n)=>{for(var i in n)e.o(n,i)&&!e.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:n[i]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};e.d({},{y:()=>d});let t=document.querySelector("#content");function n(e){document.querySelector("#error-message").textContent=e,document.querySelector("#error-popup").style.display="flex"}function i(){document.querySelector("#error-popup").style.display="none"}async function r(e){console.log("WeatherAppController units: "+d.units);try{const r=await fetch(`https://geocoding-api.open-meteo.com/v1/search?name=${e}&count=1`,{mode:"cors"}),a=await r.json();!async function(e,r,a,s,c,o){try{await async function(e,r,a){try{const n=await fetch(`https://api.openweathermap.org/data/2.5/weather?lat=${e}&lon=${r}&appid=c0516e126153fdd7ea8c4f9d0a7a0460&units=${a}&cnt=5`,{mode:"cors"}),s=await n.json();console.log("CURRENT WEATHER:"),console.log(s),function(e){!function(){let e=document.querySelector("#current-weather"),t=document.querySelector("#hour-by-hour-weather"),n=document.querySelector("#seven-day-weather");null!==e&&e.remove(),null!==t&&t.remove(),null!==n&&n.remove()}();let n,i,r,a=document.createElement("div"),s=document.createElement("span"),c=document.createElement("span"),o=document.createElement("img"),l=document.createElement("span");var p;a.setAttribute("id","current-weather"),s.innerHTML=`<strong>Current Weather</strong> - ${e.location}, ${e.country}`,s.setAttribute("id","section-title"),a.appendChild(s),c.textContent=`${Math.round(e.temp)} ${d.tempLabel}`,c.setAttribute("id","temp"),a.appendChild(c),o.setAttribute("id","icon"),o.setAttribute("src",`./images/${p=e.icon,"01d"===p||"01n"===p?"sunny.svg":"02d"===p||"02n"===p?"partly-cloudy.svg":"03d"===p||"03n"===p?"mostly-cloudy.svg":"04d"===p||"04n"===p?"cloudy.svg":"09d"===p||"09n"===p?"showers.svg":"10d"===p||"10n"===p?"rain.svg":"11d"===p||"11n"===p?"thunderstorms.svg":"13d"===p||"13n"===p?"snow.svg":"50d"===p||"50n"===p?"mist.svg":void 0}`),o.setAttribute("title",`${e.description}`),a.appendChild(o),l.textContent=e.description.charAt(0).toUpperCase()+e.description.slice(1),l.setAttribute("id","description"),a.appendChild(l),n=document.createElement("div"),i=document.createElement("span"),r=document.createElement("span"),i.textContent="Feels Like",i.setAttribute("id","value-title"),n.appendChild(i),r.textContent=`${Math.round(e.feelsLike)} ${d.tempLabel}`,r.setAttribute("id","value"),n.setAttribute("id","subsection"),n.appendChild(r),a.appendChild(n),n=document.createElement("div"),i=document.createElement("span"),r=document.createElement("span"),i.textContent="Wind",i.setAttribute("id","value-title"),n.appendChild(i),r.textContent=`${Math.round(e.wind)} ${d.windLabel}`,r.setAttribute("id","value"),n.setAttribute("id","subsection"),n.appendChild(r),a.appendChild(n),n=document.createElement("div"),i=document.createElement("span"),r=document.createElement("span"),i.textContent="Humidity",i.setAttribute("id","value-title"),n.appendChild(i),r.textContent=`${e.humidity}%`,r.setAttribute("id","value"),n.setAttribute("id","subsection"),n.appendChild(r),a.appendChild(n),n=document.createElement("div"),i=document.createElement("span"),r=document.createElement("span"),i.textContent="Visibility",i.setAttribute("id","value-title"),n.appendChild(i),r.textContent=`${e.visibility/1e3} ${d.distanceLabel}`,r.setAttribute("id","value"),n.setAttribute("id","subsection"),n.appendChild(r),a.appendChild(n),t.appendChild(a)}({location:s.name,country:s.sys.country,temp:s.main.temp,icon:s.weather[0].icon,description:s.weather[0].description,feelsLike:s.main.feels_like,wind:s.wind.speed,humidity:s.main.humidity,visibility:s.visibility}),i()}catch(e){n("OpenWeatherMap API error, please try again")}}(e,r,a)}catch(e){console.log("makeApiCalls error")}}(a.results[0].latitude,a.results[0].longitude,d.units,d.tempUnit,d.windUnit,d.precipUnit),i()}catch(e){n("Invalid city or zip code, please try again")}}let a=document.querySelector("#search-button"),s=document.querySelector("#search-box"),c=document.querySelector("#checkbox"),d=new class{constructor(e,t,n,i,r,a,s,c){this.units=e,this.tempUnit=t,this.windUnit=n,this.precipUnit=i,this.tempLabel=r,this.windLabel=a,this.precipLabel=s,this.distanceLabel=c}get units(){return this._units}get tempUnit(){return this._tempUnit}get windUnit(){return this._windUnit}get precipUnit(){return this._precipUnit}get tempLabel(){return this._tempLabel}get windLabel(){return this._windLabel}get precipLabel(){return this._precipLabel}get distanceLabel(){return this._distanceLabel}set units(e){this._units=e}set tempUnit(e){this._tempUnit=e}set windUnit(e){this._windUnit=e}set precipUnit(e){this._precipUnit=e}set tempLabel(e){this._tempLabel=e}set windLabel(e){this._windLabel=e}set precipLabel(e){this._precipLabel=e}set distanceLabel(e){this._distanceLabel=e}}("imperial","fahrenheit","mph","inch","°F","mph","in","mi");function o(e){d.units=e,"imperial"===d.units&&(d.tempUnit="fahrenheit",d.windUnit="mph",d.precipUnit="inch",d.tempLabel="°F",d.windLabel="mph",d.precipLabel="in",d.distanceLabel="mi"),"metric"===d.units&&(d.tempUnit="celsius",d.windUnit="ms",d.precipUnit="mm",d.tempLabel="°C",d.windLabel="m/s",d.precipLabel="mm",d.distanceLabel="km"),console.log(document.querySelector("#search-box").value),r(document.querySelector("#search-box").value)}a.addEventListener("click",(function(e){e.preventDefault(),r(s.value)}),!1),c.addEventListener("change",(function(){this.checked?o("metric"):o("imperial")}))})();