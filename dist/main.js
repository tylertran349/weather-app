(()=>{"use strict";var e={d:(t,n)=>{for(var i in n)e.o(n,i)&&!e.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:n[i]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};e.d({},{y:()=>d});let t=document.querySelector("#content"),n=document.querySelector("#search-button"),i=document.querySelector("#search-box"),r=document.querySelector("#checkbox");function s(e){document.querySelector("#error-message").textContent=e,document.querySelector("#error-popup").style.display="flex"}function o(){document.querySelector("#error-popup").style.display="none"}function a(e){let t=e.split(":");return`${t[0]}${t[2].slice(3,5)}`}function l(e){return 0===e?"Clear sky":1===e?"Mainly clear":2===e?"Partly cloudy":3===e?"Overcast":45===e?"Fog":48===e?"Depositing rime fog":51===e?"Light drizzle":53===e?"Moderate drizzle":55===e?"Drizzle: dense intensity":56===e?"Light freezing drizzle":57===e?"Freezing drizzle: dense intensity":61===e?"Light rain":63===e?"Moderate rain":65===e?"Heavy rain":66===e?"Light freezing rain":67===e?"Heavy freezing rain":71===e?"Light snow":73===e?"Moderate snow":75===e?"Heavy snow":77===e?"Snow grains":80===e?"Light rain showers":81===e?"Moderate rain showers":82===e?"Violent rain showers":85===e?"Light snow showers":86===e?"Heavy snow showers":95===e?"Thunderstorm, slight or moderate, without hail":96===e?"Thunderstorm, slight or moderate, with hail":99===e?"Thunderstorm, heavy, with hail":"Weather description error"}async function c(e){if(""!==e){console.log("WeatherAppController units: "+d.units);try{const n=await fetch(`https://geocoding-api.open-meteo.com/v1/search?name=${e}&count=1`,{mode:"cors"}),i=await n.json();!async function(e,n,i,r,c,u){try{await async function(e,n,i){try{const r=await fetch(`https://api.openweathermap.org/data/2.5/weather?lat=${e}&lon=${n}&appid=c0516e126153fdd7ea8c4f9d0a7a0460&units=${i}&cnt=5`,{mode:"cors"}),s=await r.json();console.log("CURRENT WEATHER:"),console.log(s),function(e){!function(){let e=document.querySelector("#current-weather"),t=document.querySelector("#hour-by-hour-weather"),n=document.querySelector("#seven-day-weather");null!==e&&e.remove(),null!==t&&t.remove(),null!==n&&n.remove()}();let n,i,r,s=document.createElement("div"),o=document.createElement("span"),a=document.createElement("span"),l=document.createElement("img"),c=document.createElement("span");var u;s.setAttribute("id","current-weather"),o.innerHTML=`<strong>Current Weather</strong> - ${e.location}, ${e.country}`,o.setAttribute("id","section-title"),s.appendChild(o),a.textContent=`${Math.round(e.temp)} ${d.tempLabel}`,a.setAttribute("id","temp"),s.appendChild(a),l.setAttribute("id","icon"),l.setAttribute("src",`./images/${u=e.icon,"01d"===u||"01n"===u?"sunny.svg":"02d"===u||"02n"===u?"partly-cloudy.svg":"03d"===u||"03n"===u?"mostly-cloudy.svg":"04d"===u||"04n"===u?"cloudy.svg":"09d"===u||"09n"===u?"showers.svg":"10d"===u||"10n"===u?"rain.svg":"11d"===u||"11n"===u?"thunderstorms.svg":"13d"===u||"13n"===u?"snow.svg":"50d"===u||"50n"===u?"fog.svg":void 0}`),l.setAttribute("title",`${e.description.charAt(0).toUpperCase()+e.description.slice(1)}`),s.appendChild(l),c.textContent=e.description.charAt(0).toUpperCase()+e.description.slice(1),c.setAttribute("id","description"),s.appendChild(c),n=document.createElement("div"),i=document.createElement("span"),r=document.createElement("span"),i.textContent="Feels Like",i.setAttribute("id","value-title"),n.appendChild(i),r.textContent=`${Math.round(e.feelsLike)} ${d.tempLabel}`,r.setAttribute("id","value"),n.setAttribute("id","subsection"),n.appendChild(r),s.appendChild(n),n=document.createElement("div"),i=document.createElement("span"),r=document.createElement("span"),i.textContent="Wind",i.setAttribute("id","value-title"),n.appendChild(i),r.textContent=`${Math.round(e.wind)} ${d.windLabel}`,r.setAttribute("id","value"),n.setAttribute("id","subsection"),n.appendChild(r),s.appendChild(n),n=document.createElement("div"),i=document.createElement("span"),r=document.createElement("span"),i.textContent="Humidity",i.setAttribute("id","value-title"),n.appendChild(i),r.textContent=`${e.humidity}%`,r.setAttribute("id","value"),n.setAttribute("id","subsection"),n.appendChild(r),s.appendChild(n),n=document.createElement("div"),i=document.createElement("span"),r=document.createElement("span"),i.textContent="Visibility",i.setAttribute("id","value-title"),n.appendChild(i),r.textContent=`${e.visibility/1e3} ${d.distanceLabel}`,r.setAttribute("id","value"),n.setAttribute("id","subsection"),n.appendChild(r),s.appendChild(n),t.appendChild(s)}({location:s.name,country:s.sys.country,temp:s.main.temp,icon:s.weather[0].icon,description:s.weather[0].description,feelsLike:s.main.feels_like,wind:s.wind.speed,humidity:s.main.humidity,visibility:s.visibility}),o()}catch(e){s("OpenWeatherMap API error, please try again")}}(e,n,i),await async function(e,n,i,r,c){try{const s=await fetch(`https://api.open-meteo.com/v1/gfs?latitude=${e}&longitude=${n}&hourly=temperature_2m,weathercode,windspeed_10m&daily=weathercode,temperature_2m_max,temperature_2m_min&current_weather=true&temperature_unit=${i}&windspeed_unit=${r}&precipitation_unit=${c}&timeformat=unixtime&forecast_days=16&timezone=auto`,{mode:"cors"}),u=await s.json();console.log("OPEN METEO DATA:"),console.log(u);let p=[],h=[],m=[],y=[];for(let e=0;e<u.hourly.time.length;e++)if(u.hourly.time[e]===u.current_weather.time){for(let t=e+1;t<=e+12;t++)p.push(u.hourly.time[t]),h.push(u.hourly.weathercode[t]),m.push(u.hourly.temperature_2m[t]),y.push(u.hourly.windspeed_10m[t]);break}!function(e){let n=document.createElement("div");n.setAttribute("id","hour-by-hour-weather");let i=document.createElement("span");i.textContent="Hour-by-Hour Forecast",i.setAttribute("id","section-title"),n.appendChild(i);let r=document.createElement("div");r.setAttribute("id","subsections");for(let t=0;t<12;t++){let n=document.createElement("div");n.setAttribute("id","subsection"),console.log(`${e.hourlyTimes[t]} ${e.hourlyDescriptions[t]} ${e.hourlyTemps[t]} ${e.hourlyWinds[t]}`);let i=document.createElement("span"),o=new Date(1e3*e.hourlyTimes[t]).toLocaleDateString("en-US"),c=new Date(1e3*e.hourlyTimes[t]).toLocaleTimeString("en-US");i.textContent=`${o.slice(0,-5)} ${a(c)}`,i.setAttribute("id","date-and-time"),n.appendChild(i);let u=document.createElement("img");u.setAttribute("src","./images/"+(0===(s=e.hourlyDescriptions[t])?"sunny.svg":1===s||2===s?"partly-cloudy.svg":3===s||45===s||48===s?"cloudy.svg":51===s||53===s||55===s||56===s||57===s?"fog.svg":61===s||63===s||65===s?"rain.svg":66===s||67===s?"freezing-rain.svg":71===s||73===s||75===s||77===s?"snow.svg":80===s||81===s||82===s?"showers.svg":85===s||86===s?"snow.svg":95===s||96===s||99===s?"thunderstorms.svg":"unknown.svg")),u.setAttribute("title",`${l(e.hourlyDescriptions[t])}`),u.setAttribute("id","icon"),n.appendChild(u);let p=document.createElement("span");p.textContent=`${l(e.hourlyDescriptions[t])}`,p.setAttribute("id","description"),n.appendChild(p);let h=document.createElement("span");h.innerHTML=`Temp <strong>${Math.round(e.hourlyTemps[t])} ${d.tempLabel}</strong>`,n.appendChild(h);let m=document.createElement("span");m.innerHTML=`Wind <strong>${Math.round(e.hourlyWinds[t])} ${d.windLabel}</strong>`,n.appendChild(m),r.appendChild(n)}var s;n.appendChild(r),t.appendChild(n)}({hourlyTimes:p,hourlyDescriptions:h,hourlyTemps:m,hourlyWinds:y}),o()}catch(e){s("Open Meteo API error, please try again")}}(e,n,r,c,u)}catch(e){s("makeApiCalls() error, please try again")}}(i.results[0].latitude,i.results[0].longitude,d.units,d.tempUnit,d.windUnit,d.precipUnit),o()}catch(e){s("Invalid city or zip code, please try again")}}}n.addEventListener("click",(function(e){e.preventDefault(),c(i.value)}),!1),r.addEventListener("change",(function(){this.checked?(d.changeUnits("metric"),document.querySelector("#switch-fahrenheit").style.color="white",document.querySelector("#switch-celsius").style.color="#303030"):(d.changeUnits("imperial"),document.querySelector("#switch-fahrenheit").style.color="#303030",document.querySelector("#switch-celsius").style.color="white")}));let d=new class{constructor(e,t,n,i,r,s,o,a){this.units=e,this.tempUnit=t,this.windUnit=n,this.precipUnit=i,this.tempLabel=r,this.windLabel=s,this.precipLabel=o,this.distanceLabel=a}get units(){return this._units}get tempUnit(){return this._tempUnit}get windUnit(){return this._windUnit}get precipUnit(){return this._precipUnit}get tempLabel(){return this._tempLabel}get windLabel(){return this._windLabel}get precipLabel(){return this._precipLabel}get distanceLabel(){return this._distanceLabel}set units(e){this._units=e}set tempUnit(e){this._tempUnit=e}set windUnit(e){this._windUnit=e}set precipUnit(e){this._precipUnit=e}set tempLabel(e){this._tempLabel=e}set windLabel(e){this._windLabel=e}set precipLabel(e){this._precipLabel=e}set distanceLabel(e){this._distanceLabel=e}changeUnits(e){d.units=e,"imperial"===d.units&&(d.tempUnit="fahrenheit",d.windUnit="mph",d.precipUnit="inch",d.tempLabel="°F",d.windLabel="mph",d.precipLabel="in",d.distanceLabel="mi"),"metric"===d.units&&(d.tempUnit="celsius",d.windUnit="ms",d.precipUnit="mm",d.tempLabel="°C",d.windLabel="m/s",d.precipLabel="mm",d.distanceLabel="km"),console.log(document.querySelector("#search-box").value),c(document.querySelector("#search-box").value)}}("imperial","fahrenheit","mph","inch","°F","mph","in","mi")})();