(()=>{"use strict";var e={d:(t,n)=>{for(var i in n)e.o(n,i)&&!e.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:n[i]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};e.d({},{y:()=>u});let t=document.querySelector("#content"),n=document.querySelector("#search-button"),i=document.querySelector("#search-box"),r=document.querySelector("#checkbox");function a(e){document.querySelector("#error-message").textContent=e,document.querySelector("#error-popup").style.display="flex"}function s(){document.querySelector("#error-popup").style.display="none"}function o(e){let t=e.split(":");return`${t[0]}${t[2].slice(3,5)}`}function d(e){return 0===e?"Clear sky":1===e?"Mainly clear":2===e?"Partly cloudy":3===e?"Overcast":45===e||48===e?"Fog":51===e||53===e||55===e?"Drizzle":56===e||57===e?"Freezing drizzle":61===e?"Light rain":63===e?"Moderate rain":65===e?"Heavy rain":66===e||67===e?"Freezing rain":71===e?"Light snow":73===e?"Moderate snow":75===e?"Heavy snow":77===e?"Snow grains":80===e||81===e||82===e?"Light rain showers":85===e?"Light snow showers":86===e?"Heavy snow showers":95===e||96===e||99===e?"Thunderstorms":"Description error"}function l(e){return 0===e?"sunny.svg":1===e||2===e?"partly-cloudy.svg":3===e||45===e||48===e?"cloudy.svg":51===e||53===e||55===e||56===e||57===e?"fog.svg":61===e||63===e||65===e?"rain.svg":66===e||67===e?"freezing-rain.svg":71===e||73===e||75===e||77===e?"snow.svg":80===e||81===e||82===e?"showers.svg":85===e||86===e?"snow.svg":95===e||96===e||99===e?"thunderstorms.svg":"unknown.svg"}async function c(e){if(""!==e)try{const n=await fetch(`https://geocoding-api.open-meteo.com/v1/search?name=${e}&count=1`,{mode:"cors"}),i=await n.json();!async function(e,n,i,r,c,p){try{await async function(e,n,i){try{const r=await fetch(`https://api.openweathermap.org/data/2.5/weather?lat=${e}&lon=${n}&appid=c0516e126153fdd7ea8c4f9d0a7a0460&units=${i}&cnt=5`,{mode:"cors"}),a=await r.json();(function(e){!function(){let e=document.querySelector("#current-weather"),t=document.querySelector("#hour-by-hour-weather"),n=document.querySelector("#fourteen-day-weather");null!==e&&e.remove(),null!==t&&t.remove(),null!==n&&n.remove()}();let n,i,r,a=document.createElement("div"),s=document.createElement("span"),o=document.createElement("span"),d=document.createElement("img"),l=document.createElement("span");var c;a.setAttribute("id","current-weather"),s.innerHTML=`<strong>Current Weather</strong> - ${e.location}, ${e.country}`,s.setAttribute("id","section-title"),a.appendChild(s),o.textContent=`${Math.round(e.temp)} ${u.tempLabel}`,o.setAttribute("id","temp"),a.appendChild(o),d.setAttribute("id","icon"),d.setAttribute("src",`./images/${c=e.icon,"01d"===c||"01n"===c?"sunny.svg":"02d"===c||"02n"===c?"partly-cloudy.svg":"03d"===c||"03n"===c?"mostly-cloudy.svg":"04d"===c||"04n"===c?"cloudy.svg":"09d"===c||"09n"===c?"showers.svg":"10d"===c||"10n"===c?"rain.svg":"11d"===c||"11n"===c?"thunderstorms.svg":"13d"===c||"13n"===c?"snow.svg":"50d"===c||"50n"===c?"fog.svg":void 0}`),d.setAttribute("title",`${e.description.charAt(0).toUpperCase()+e.description.slice(1)}`),a.appendChild(d),l.textContent=e.description.charAt(0).toUpperCase()+e.description.slice(1),l.setAttribute("id","description"),a.appendChild(l),n=document.createElement("div"),i=document.createElement("span"),r=document.createElement("span"),i.textContent="Feels Like",i.setAttribute("id","value-title"),n.appendChild(i),r.textContent=`${Math.round(e.feelsLike)} ${u.tempLabel}`,r.setAttribute("id","value"),n.setAttribute("id","subsection"),n.appendChild(r),a.appendChild(n),n=document.createElement("div"),i=document.createElement("span"),r=document.createElement("span"),i.textContent="Wind",i.setAttribute("id","value-title"),n.appendChild(i),r.textContent=`${Math.round(e.wind)} ${u.windLabel}`,r.setAttribute("id","value"),n.setAttribute("id","subsection"),n.appendChild(r),a.appendChild(n),n=document.createElement("div"),i=document.createElement("span"),r=document.createElement("span"),i.textContent="Humidity",i.setAttribute("id","value-title"),n.appendChild(i),r.textContent=`${e.humidity}%`,r.setAttribute("id","value"),n.setAttribute("id","subsection"),n.appendChild(r),a.appendChild(n),n=document.createElement("div"),i=document.createElement("span"),r=document.createElement("span"),i.textContent="Visibility",i.setAttribute("id","value-title"),n.appendChild(i),r.textContent=`${Math.round(e.visibility/1e3)} ${u.distanceLabel}`,r.setAttribute("id","value"),n.setAttribute("id","subsection"),n.appendChild(r),a.appendChild(n),t.appendChild(a)})({location:a.name,country:a.sys.country,temp:a.main.temp,icon:a.weather[0].icon,description:a.weather[0].description,feelsLike:a.main.feels_like,wind:a.wind.speed,humidity:a.main.humidity,visibility:a.visibility}),s()}catch(e){a("OpenWeatherMap API error, please try again")}}(e,n,i),await async function(e,n,i,r,c){try{const a=await fetch(`https://api.open-meteo.com/v1/gfs?latitude=${e}&longitude=${n}&hourly=temperature_2m,weathercode,windspeed_10m&daily=weathercode,temperature_2m_max,temperature_2m_min&current_weather=true&temperature_unit=${i}&windspeed_unit=${r}&precipitation_unit=${c}&timeformat=unixtime&forecast_days=16&timezone=auto`,{mode:"cors"}),p=await a.json();let m=[],h=[],y=[],b=[];for(let e=0;e<p.hourly.time.length;e++)if(p.hourly.time[e]===p.current_weather.time){for(let t=e+1;t<=e+12;t++)m.push(p.hourly.time[t]),h.push(p.hourly.weathercode[t]),y.push(p.hourly.temperature_2m[t]),b.push(p.hourly.windspeed_10m[t]);break}!function(e){let n=document.createElement("div");n.setAttribute("id","hour-by-hour-weather");let i=document.createElement("span");i.textContent="Hour-by-Hour Forecast",i.setAttribute("id","section-title"),n.appendChild(i);let r=document.createElement("div");r.setAttribute("id","subsections");for(let t=0;t<12;t++){let n=document.createElement("div");n.setAttribute("id","subsection");let i=document.createElement("span"),a=new Date(1e3*e.hourlyTimes[t]).toLocaleDateString("en-US"),s=new Date(1e3*e.hourlyTimes[t]).toLocaleTimeString("en-US");i.textContent=`${a.slice(0,-5)} ${o(s)}`,i.setAttribute("id","date-and-time"),n.appendChild(i);let c=document.createElement("img");c.setAttribute("src",`./images/${l(e.hourlyDescriptions[t])}`),c.setAttribute("title",`${d(e.hourlyDescriptions[t])}`),c.setAttribute("id","icon"),n.appendChild(c);let p=document.createElement("span");p.textContent=`${d(e.hourlyDescriptions[t])}`,p.setAttribute("id","description"),n.appendChild(p);let m=document.createElement("span");m.innerHTML=`Temp <strong>${Math.round(e.hourlyTemps[t])} ${u.tempLabel}</strong>`,n.appendChild(m);let h=document.createElement("span");h.innerHTML=`Wind <strong>${Math.round(e.hourlyWinds[t])} ${u.windLabel}</strong>`,n.appendChild(h),r.appendChild(n)}n.appendChild(r),t.appendChild(n)}({hourlyTimes:m,hourlyDescriptions:h,hourlyTemps:y,hourlyWinds:b});let g=[],w=[],v=[],C=[];for(let e=0;e<14;e++)g.push(p.daily.time[e]),w.push(p.daily.weathercode[e]),v.push(p.daily.temperature_2m_max[e]),C.push(p.daily.temperature_2m_min[e]);!function(e){let n=document.createElement("div");n.setAttribute("id","fourteen-day-weather");let i=document.createElement("span");i.textContent="14-Day Forecast",i.setAttribute("id","section-title"),n.appendChild(i);let r=document.createElement("div");r.setAttribute("id","subsections");for(let t=0;t<14;t++){let n=document.createElement("div");n.setAttribute("id","subsection");let i=document.createElement("span"),a=new Date(1e3*e.dailyDates[t]).toLocaleDateString("en-US");i.textContent=`${a.slice(0,-5)}`,i.setAttribute("id","date-and-time"),n.appendChild(i);let s=document.createElement("img");s.setAttribute("src",`./images/${l(e.dailyDescriptions[t])}`),s.setAttribute("title",`${d(e.dailyDescriptions[t])}`),s.setAttribute("id","icon"),n.appendChild(s);let o=document.createElement("span");o.textContent=`${d(e.dailyDescriptions[t])}`,o.setAttribute("id","description"),n.appendChild(o);let c=document.createElement("span");c.innerHTML=`High <strong>${Math.round(e.dailyHighs[t])} ${u.tempLabel}</strong>`,n.appendChild(c);let p=document.createElement("span");p.innerHTML=`Low <strong>${Math.round(e.dailyLows[t])} ${u.tempLabel}</strong>`,n.appendChild(p),r.appendChild(n)}n.appendChild(r),t.appendChild(n)}({dailyDates:g,dailyDescriptions:w,dailyHighs:v,dailyLows:C}),s()}catch(e){a("Open Meteo API error, please try again")}}(e,n,r,c,p)}catch(e){a("makeApiCalls() error, please try again")}}(i.results[0].latitude,i.results[0].longitude,u.units,u.tempUnit,u.windUnit,u.precipUnit),s()}catch(e){a("Invalid city or zip code, please try again")}}n.addEventListener("click",(function(e){e.preventDefault(),c(i.value)}),!1),r.addEventListener("change",(function(){this.checked?(u.changeUnits("metric"),document.querySelector("#switch-fahrenheit").style.color="white",document.querySelector("#switch-celsius").style.color="#303030"):(u.changeUnits("imperial"),document.querySelector("#switch-fahrenheit").style.color="#303030",document.querySelector("#switch-celsius").style.color="white")}));let u=new class{constructor(e,t,n,i,r,a,s,o){this.units=e,this.tempUnit=t,this.windUnit=n,this.precipUnit=i,this.tempLabel=r,this.windLabel=a,this.precipLabel=s,this.distanceLabel=o}get units(){return this._units}get tempUnit(){return this._tempUnit}get windUnit(){return this._windUnit}get precipUnit(){return this._precipUnit}get tempLabel(){return this._tempLabel}get windLabel(){return this._windLabel}get precipLabel(){return this._precipLabel}get distanceLabel(){return this._distanceLabel}set units(e){this._units=e}set tempUnit(e){this._tempUnit=e}set windUnit(e){this._windUnit=e}set precipUnit(e){this._precipUnit=e}set tempLabel(e){this._tempLabel=e}set windLabel(e){this._windLabel=e}set precipLabel(e){this._precipLabel=e}set distanceLabel(e){this._distanceLabel=e}changeUnits(e){u.units=e,"imperial"===u.units&&(u.tempUnit="fahrenheit",u.windUnit="mph",u.precipUnit="inch",u.tempLabel="°F",u.windLabel="mph",u.precipLabel="in",u.distanceLabel="mi"),"metric"===u.units&&(u.tempUnit="celsius",u.windUnit="ms",u.precipUnit="mm",u.tempLabel="°C",u.windLabel="m/s",u.precipLabel="mm",u.distanceLabel="km"),c(document.querySelector("#search-box").value)}}("imperial","fahrenheit","mph","inch","°F","mph","in","mi")})();